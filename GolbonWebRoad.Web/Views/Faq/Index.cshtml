@model GolbonWebRoad.Web.Models.Faqs.FaqPageViewModel
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سوالات متداول - فروشگاه Tecture</title>
    <meta name="description" content="پاسخ به سوالات پرتکرار درباره ثبت سفارش، پرداخت، ارسال، پیگیری و بازگشت کالا در فروشگاه Tecture.">

    @{
        var request = Context.Request;
        var faqUrl = $"{request.Scheme}://{request.Host}{request.PathBase}{request.Path}{request.QueryString}";
        var homeUrl = $"{request.Scheme}://{request.Host}/";
        var siteName = "فروشگاه گلبن Tecture";
        var ogTitle = "سوالات متداول | Tecture";
        var ogDesc = "پاسخ به سوالات پرتکرار درباره سفارش، پرداخت، ارسال و بازگشت کالا.";
        var ogImage = "/images/hero-background.jpg";

        var breadcrumb = new Dictionary<string, object?>
        {
            ["@context"] = "https://schema.org",
            ["@type"] = "BreadcrumbList",
            ["itemListElement"] = new List<Dictionary<string, object?>>
            {
                new Dictionary<string, object?> { ["@type"] = "ListItem", ["position"] = 1, ["name"] = "خانه", ["item"] = homeUrl },
                new Dictionary<string, object?> { ["@type"] = "ListItem", ["position"] = 2, ["name"] = "سوالات متداول", ["item"] = faqUrl }
            }
        };

        var webpage = new Dictionary<string, object?>
        {
            ["@context"] = "https://schema.org",
            ["@type"] = "WebPage",
            ["name"] = ogTitle,
            ["description"] = ogDesc,
            ["url"] = faqUrl,
            ["inLanguage"] = "fa-IR",
            ["isPartOf"] = new Dictionary<string, object?>
            {
                ["@type"] = "WebSite",
                ["url"] = homeUrl
            }
        };

        var mainEntities = new List<Dictionary<string, object?>>();
        if (Model?.Categories != null)
        {
            foreach (var cat in Model.Categories)
            {
                foreach (var item in cat.Items)
                {
                    mainEntities.Add(new Dictionary<string, object?>
                    {
                        ["@type"] = "Question",
                        ["name"] = item.Question,
                        ["acceptedAnswer"] = new Dictionary<string, object?>
                        {
                            ["@type"] = "Answer",
                            ["text"] = item.AnswerHtml
                        }
                    });
                }
            }
        }
        var faqSchema = new Dictionary<string, object?>
        {
            ["@context"] = "https://schema.org",
            ["@type"] = "FAQPage",
            ["mainEntity"] = mainEntities
        };

        var jsonOptions = new System.Text.Json.JsonSerializerOptions
        {
            DefaultIgnoreCondition = System.Text.Json.Serialization.JsonIgnoreCondition.WhenWritingNull,
            Encoder = System.Text.Encodings.Web.JavaScriptEncoder.UnsafeRelaxedJsonEscaping
        };
    }

    <link rel="canonical" href="@faqUrl" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="@ogTitle" />
    <meta property="og:description" content="@ogDesc" />
    <meta property="og:url" content="@faqUrl" />
    <meta property="og:site_name" content="@siteName" />
    <meta property="og:locale" content="fa_IR" />
    <meta property="og:image" content="@ogImage" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="@siteName" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="@ogTitle" />
    <meta name="twitter:description" content="@ogDesc" />
    <meta name="twitter:image" content="@ogImage" />
    <meta name="twitter:image:alt" content="@siteName" />
    <meta name="twitter:url" content="@faqUrl" />

    <script type="application/ld+json">
        @Html.Raw(System.Text.Json.JsonSerializer.Serialize(webpage, jsonOptions))
    </script>
    <script type="application/ld+json">
        @Html.Raw(System.Text.Json.JsonSerializer.Serialize(breadcrumb, jsonOptions))
    </script>
    <script type="application/ld+json">
        @Html.Raw(System.Text.Json.JsonSerializer.Serialize(faqSchema, jsonOptions))
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <style>
        :root { --bg-color: #121212; --primary-text-color: #FFFFFF; --secondary-text-color: #a0a0a0; --card-bg-color: #1a1a1a; --border-color: #333333; --accent-color: #4a90e2; }
        body.light-mode { --bg-color: #f4f4f5; --card-bg-color: #FFFFFF; --primary-text-color: #18181b; --secondary-text-color: #71717a; --border-color: #e4e4e7; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: var(--main-font); background-color: var(--bg-color); color: var(--primary-text-color); line-height: 1.7; overflow-x: hidden; transition: background-color 0.3s ease, color 0.3s ease; }
        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }
        a { text-decoration: none; color: var(--primary-text-color); transition: color 0.3s ease; }
        a:hover { color: var(--accent-color); }
        .page-header { padding: 60px 0; background-color: var(--card-bg-color); text-align: center; border-bottom: 1px solid var(--border-color); }
        .page-header h1 { font-size: 3rem; font-weight: 800; }
        .page-header p { color: var(--secondary-text-color); margin-top: 10px; }
        .faq-section { padding: 80px 0; }
        .faq-category { margin-bottom: 40px; }
        .faq-category h2 { font-size: 1.8rem; margin-bottom: 25px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
        .faq-item { background-color: var(--card-bg-color); border: 1px solid var(--border-color); margin-bottom: 15px; }
        .faq-question { display: flex; justify-content: space-between; align-items: center; padding: 20px; cursor: pointer; font-weight: 700; font-size: 1.1rem; }
        .faq-question i { transition: transform 0.4s ease; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.4s ease, padding 0.4s ease; }
        .faq-answer .content { color: var(--secondary-text-color); padding: 0 20px 20px 20px; border-top: 1px solid var(--border-color); padding-top: 20px; }
        .faq-item.active .faq-question i { transform: rotate(180deg); }
        .faq-item.active .faq-answer { max-height: 1000px; }
        @@media (max-width: 992px) { .main-nav, .header-action-link span { display: none; } }
    </style>
</head>
<body>
    <main>
        <header class="page-header" data-aos="fade-in">
            <h1>سوالات متداول</h1>
            <p>پاسخ سوالات خود را در اینجا پیدا کنید.</p>
        </header>

        <section class="faq-section">
            <div class="container">
                @if (Model?.Categories != null && Model.Categories.Any())
                {
                    foreach (var category in Model.Categories)
                    {
                        <div class="faq-category" data-aos="fade-up">
                            <h2>@category.Category</h2>
                            @foreach (var item in category.Items)
                            {
                                var anchor = !string.IsNullOrWhiteSpace(item.Slog) ? item.Slog : $"faq-{item.Id}";
                                <div id="@anchor" class="faq-item">
                                    <div class="faq-question">
                                        <span>@item.Question</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="faq-answer">
                                        <div class="content">@Html.Raw(item.AnswerHtml)</div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                }
                else
                {
                    <p class="text-center text-muted">سوالی ثبت نشده است.</p>
                }
            </div>
        </section>
    </main>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 800, once: true });
        (function faqAccordion() {
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    item.classList.toggle('active');
                });
            });
        })();
    </script>
</body>
</html>
